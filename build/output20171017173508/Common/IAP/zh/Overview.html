<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../nhnfavicon.ico">

	      <title>Toast Cloud Document</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
		    <!-- <link href="http://alpha-www.toast.com/share/common/css/common-1.0.min.css" rel="stylesheet"> -->
        <link href="../../../css/common-1.0.min.css" rel="stylesheet">
        <link href="../../../css/custom_tc_theme.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>
	<body>
	<header id="header">
        </header>
        <div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div>
        <div class="navbar-header" style="padding-top : 30px;">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
 
        </div>
        <div class="navbar-collapse collapse">
		
                    </ul>
                </li>

    	    </ul>
        </div>
    </div>
</div>        <div class="container" style="margin-top: 100px;">
            <div class="col-md-2">
            	<div class="side_nav_left_wrapper">
	           	<div id="side_nav_left" class="side-nav">
	            		<div id="remotenav" class="bs-sidebar hidden-print affix well toc-list" role="complementary"> 
					<ul class="nav bs-sidenav">
						
					</ul>
				</div>
			</div>
		</div>
    	</div>
		


	<div class="col-md-8 content-container" role="main"> 			
		<h2>Common &gt; IAP &gt; Overview</h2><p>In-App Purchase (IAP) service is an integrated in-app purchase service.</p><h2>Main Features</h2><p>IAP offers the following features.</p>
<ul>
  <li>Purchasing is done easily by calling API only 2 to 3 times within SDK.</li>
  <li>Various in-app purchases, such as Google Play and Apple App Store, are integrated in a single interface.<br/>There is no need to study over detailed payment sync process for each store.</li>
  <li>Security will become more powerful with purchase verification server provided by IAP.</li>
  <li>Web console provides purchase history inquiry function for customer support.</li>
</ul><h2>Available Store</h2><p>These are stores serviced by IAP service. </p><p>[Table.1 Store Supported]</p>
<table>
  <thead>
    <tr>
      <th>OS Type </th>
      <th>Store </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Android </td>
      <td>Google Play </td>
    </tr>
    <tr>
      <td>Android </td>
      <td>One Store(TStore + olleh market + UStore + Naver App Store)<br><a href="http://dev.onestore.co.kr">http://dev.onestore.co.kr</a> </td>
    </tr>
    <tr>
      <td>iOS </td>
      <td>Apple App Store </td>
    </tr>
  </tbody>
</table><h2>Terms</h2><p>These are terms for IAP service.</p><p>[Table.2 IAP Terms]</p>
<table>
  <thead>
    <tr>
      <th>Term </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>AppKey </td>
      <td>These are terms for IAP service. </td>
    </tr>
    <tr>
      <td>Store </td>
      <td>App Store, Google Play </td>
    </tr>
    <tr>
      <td>Payment </td>
      <td>User purchase history </td>
    </tr>
    <tr>
      <td>Purchase </td>
      <td>Item purchased in-app </td>
    </tr>
    <tr>
      <td>Consume </td>
      <td>Consuming purchase before creating item for user. </td>
    </tr>
    <tr>
      <td>Payment Purchase Token </td>
      <td>Verification token used when user application server consumes purchase. </td>
    </tr>
  </tbody>
</table><h2>Service Diagram</h2><p>IAP service is comprised of 4 components as in following figure: IAP SDK, User Application Server, IAP Server, and Market.</p><p><img src="http://static.toastoven.net/prod_iap/iap_n_1.png" alt="[Figure 1 IAP Service Diagram - Server To Server Model]" /><br/><center>[Figure 1 IAP Service Diagram - Server To Server Model]</center></p><p><img src="http://static.toastoven.net/prod_iap/iap_n_23.png" alt="[Figure 2 IAP Service Diagram - Build-in Model]" /><br/><center>[Figure 2 IAP Service Diagram - Build-in Model]</center></p>
<table>
  <thead>
    <tr>
      <th>Component </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>IAP SDK </td>
      <td>Register User ID and request payment for in-app purchase. If payment is performed, you’ll move to in-app purchase screen of the store (Google Store for Android). </td>
    </tr>
    <tr>
      <td>User Application Server </td>
      <td>Verify purchase history requested by client via IAP server, consume purchase and transfer item. </td>
    </tr>
    <tr>
      <td>User Application Client </td>
      <td>If there is no server existent to user application, perform payment consume in application’s client and grant authority for item. </td>
    </tr>
    <tr>
      <td>IAP Server </td>
      <td>This is in-app purchase server provided by TOAST Cloud</td>
    </tr>
    <tr>
      <td>Store </td>
      <td>It includes various stores such as Google Store and Apple App Store. Store server for each platform is synchronized with IAP server. </td>
    </tr>
  </tbody>
</table>
<center>[Table. 3 IAP Component]</center><h2>IAP Payment Flow</h2><p>In-app purchase provides IAP SDK and IAP server API. The following figure is payment flow.</p><p><img src="http://static.toastoven.net/prod_iap/iap_n_28.png" alt="[Figure. 3 Server To Server Model Payment Flow]" /><br/><center>[Figure. 3 Server To Server Model Payment Flow]</center></p><p><img src="http://static.toastoven.net/prod_iap/iap_n_29.png" alt="[Figure. 4 Build-in model Payment Flow]" /><br/><center>[Figure. 4 Build-in model Payment Flow]</center></p><p>[Table.4 IAP Payment Flow]</p>
<table>
  <thead>
    <tr>
      <th>Step </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>[1] </td>
      <td>Register payment user ID. Developer identifies the payment user and provides item accordingly. This is not Google Play or App Store account.<br>**[Reference]** <br>API Step<br>Android : InternalInAppPurchase.InAppPurchase.registerUserId<br>iOS : TIAPurchase registerUserId: error: </td>
    </tr>
    <tr>
      <td>[2] </td>
      <td>Request payment in client<br>**[Reference]** <br>API Step<br>Android : InternalInAppPurchase..InAppPurchases.requestPurchase<br>iOS : TIAPurchase startPurchaseWithViewController: itemId: completionHandler </td>
    </tr>
    <tr>
      <td>[3]<br>[3-1] </td>
      <td>Perform payment in store. </td>
    </tr>
    <tr>
      <td>[4] </td>
      <td>Once payment is done in store, payment result will be delivered. <br>Consume item in user application server using the result.<br>**[Warning]** <br>For Build in model, if user application server is not existent, payment consume is done directly from client. However, for security reason, we strongly recommend you to consume payment in server to server method before granting authority to item. </td>
    </tr>
    <tr>
      <td>[4-1]<br>[4-2] </td>
      <td>Request consume to IAP Server via transferred result from the store </td>
    </tr>
    <tr>
      <td>[5] </td>
      <td>Deliver item to the user if consume is successful </td>
    </tr>
    <tr>
      <td>[6] </td>
      <td>Complete payment. </td>
    </tr>
  </tbody>
</table>
   	</div>

 	
	
	<div class="col-md-2">
		<div id="side_nav_right" class="side-nav">
			<div id="sub-link-nav" role="complementary">
    				<b id="sub-link-category-name" class="main"></b>
    				<ul class="nav">

    				</ul>
			</div>
		</div>
	</div>       
        
</div>

<footer id="footer" class="col-md-12">
</footer>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../../../js/readthedocs-data.js"></script>
    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/modernizr-custom.js"></script>
    <script type='text/javascript'>
         if (!Modernizr.matchmedia){
             $.getScript("js/media.match.min.js");
         }
    </script>
    <script src="../../../js/highlight.pack.js"></script>
    <script src="../../../js/enquire.min.js"></script>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/base.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/common-1.0.min.js"></script>
    <script src="../../../js/custom.js"></script>
    
	<script src="../../../js/js.cookie.js"></script>
	
	<script language='javascript'>
	if ( document.cookie == "" ){
	console.log("change");
	Cookies.set('ACEFCID', 'UID-59E5799FBC4FC8C9A29963B3',{path: ''});
	Cookies.set('AECUCI', '1',{path: ''});
	Cookies.set('BID', '5L76UVQPYSDFK836992CCGYLA',{path: ''});
	Cookies.set('NNB', '55YK4WMTKOXFS',{path: ''});
	Cookies.set('ttx_did', 'e93d733a-c43b-452c-b3ea-57c49bc5e9f8',{path: ''});
	Cookies.set('userLocale', 'ko_KR',{path: ''});
	}
	</script>
	
    <!-- <script src="../../../js/prettify.js"></script>  -->

        <script language='javascript'>
        var _ag   = 0 ;         // 로그인사용자 나이
        var _id   = '';    		// 로그인사용자 아이디
        var _mr   = '';        	// 로그인사용자 결혼여부 ('single' , 'married' )
        var _gd   = '';         // 로그인사용자 성별 ('man' , 'woman')
        var _skey = '' ;        // 내부검색어

        var _jn = '' ;          //  가입탈퇴 ( 'join','withdraw' ) 
        var _jid = '' ;			// 가입시입력한 ID

        var _ud1 = '' ;			// 사용자 정의변수 1 ( 1 ~ 10 정수값)
        var _ud2 = '' ;			// 사용자 정의변수 2 ( 1 ~ 10 정수값)
        var _ud3 = '' ;			// 사용자 정의변수 3 ( 1 ~ 10 정수값)
        </script>
		
		<script language='javascript'>
		$("h2,h3").attr("id", function (arr) {
			return arr;
		});
		</script>
	
	 <script language='javascript'>
		function appendListToSubLinkNav() {

        var $parent_menu = $('ul.dropdown-menu > li.active').parent().parent();
		
        if(!$parent_menu.length) {
            $('#side_nav_right').remove();
        }
        else {
            var depth_stack = [];
            while($parent_menu.is('li')) {
                var temp = $parent_menu;
                depth_stack.push(temp);
                $parent_menu = $parent_menu.parent().parent();
            }
            var title_menu = (depth_stack.length > 1)? depth_stack[depth_stack.length-2] : depth_stack[0];
		    $('#sub-link-category-name').text(title_menu.children("a")[0].innerText);
			var subMenuList = $('li .active').parent().get(0).childNodes;
			for (var i = 0; i < subMenuList.length; i++) {
				$("#sub-link-list").append(subMenuList[i].cloneNode(true));
				$("#sub-link-nav > ul").append(subMenuList[i].cloneNode(true));
			}
		}
	}
	</script>

	
     <!-- <script language='javascript'>
            var _AceGID=(function(){var Inf=['gtp18.acecounter.com','8080','AH2A40934468137','AW','0','NaPm,Ncisy','ALL','0']; var _CI=(!_AceGID)?[]:_AceGID.val;var _N=0;var _T=new Image(0,0);if(_CI.join('.').indexOf(Inf[3])<0){ _T.src =( location.protocol=="https:"?"https://"+Inf[0]:"http://"+Inf[0]+":"+Inf[1]) +'/?cookie'; _CI.push(Inf);  _N=_CI.length; } return {o: _N,val:_CI}; })();
            var _AceCounter=(function(){var G=_AceGID;if(G.o!=0){var _A=G.val[G.o-1];var _G=( _A[0]).substr(0,_A[0].indexOf('.'));var _C=(_A[7]!='0')?(_A[2]):_A[3];	var _U=( _A[5]).replace(/\,/g,'_');var _S=((['<scr','ipt','type="text/javascr','ipt"></scr','ipt>']).join('')).replace('tt','t src="'+location.protocol+ '//cr.acecounter.com/Web/AceCounter_'+_C+'.js?gc='+_A[2]+'&py='+_A[4]+'&gd='+_G+'&gp='+_A[1]+'&up='+_U+'&rd='+(new Date().getTime())+'" t');document.writeln(_S); return _S;} })();
        </script>
	<noscript><img src='http://gtp18.acecounter.com:8080/?uid=AH2A40934468137&je=n&' border='0' width='0' alt=''></noscript> -->

  </body>
</html>
