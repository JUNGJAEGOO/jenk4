<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../nhnfavicon.ico">

	      <title>Toast Cloud Document</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
		    <!-- <link href="http://alpha-www.toast.com/share/common/css/common-1.0.min.css" rel="stylesheet"> -->
        <link href="../../../css/common-1.0.min.css" rel="stylesheet">
        <link href="../../../css/custom_tc_theme.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>
	<body>
	<header id="header">
        </header>
        <div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div>
        <div class="navbar-header" style="padding-top : 30px;">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
 
        </div>
        <div class="navbar-collapse collapse">
		
                    </ul>
                </li>

    	    </ul>
        </div>
    </div>
</div>        <div class="container" style="margin-top: 100px;">
            <div class="col-md-2">
            	<div class="side_nav_left_wrapper">
	           	<div id="side_nav_left" class="side-nav">
	            		<div id="remotenav" class="bs-sidebar hidden-print affix well toc-list" role="complementary"> 
					<ul class="nav bs-sidenav">
						
					</ul>
				</div>
			</div>
		</div>
    	</div>
		


	<div class="col-md-8 content-container" role="main"> 			
		<h2>Common &gt; IAP &gt; Android Developer&rsquo;s Guide</h2><h2>Development Environment</h2>
<ul>
  <li>Windows</li>
  <li>Eclipse in Android Development Tools / Android Studio IDE 1.2</li>
  <li>Android 5.0.1 (API Level 21)</li>
  <li>Android SDK Version is beyond <strong>2.3.3 (API Level 10)</strong></li>
</ul><p>The open sources in use are as follows.</p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Reference</th>
      <th>Version</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>okhttp</td>
      <td><a href="http://square.github.io/okhttp/|1.5.4|Apache">http://square.github.io/okhttp/|1.5.4|Apache</a> License 2.0</td>
    </tr>
    <tr>
      <td>gson</td>
      <td><a href="https://code.google.com/p/google-gson/|2.2.4|Apache">https://code.google.com/p/google-gson/|2.2.4|Apache</a> License 2.0</td>
    </tr>
  </tbody>
</table><h2>Using in Android Studio &amp; Gradle</h2><p>IAP’s Android SDK offers development environment for Gradle-based Android Studio IDE. Remote downloading is available from jCenter Maven Repository. Define repository and dependency in build.gradle file of the project as below</p><h3>Gradle Repository</h3>
<pre><code>buildscript {
    repositories {
        jcenter()
    }
}
</code></pre>
<pre><code>dependencies {
    compile group: &#39;com.toast.iap&#39;, name: &#39;iap&#39;, version: project.TOAST_IAP_SDK_VERSION
}
</code></pre>
<blockquote><p>[Reference]<br/>Specify SDK version in project.TOAST_IAP_SDK_VERSION. Using Gradle Project beyond version 1.1.0 is recommended. </p>
</blockquote><p><br/></p>
<blockquote><p>[Reference]<br/>Please refer to RELEASE-NOTES.md within package for SDK version history</p>
</blockquote><h3>Implementing Sample Application</h3><h4>Import Project</h4><p>Import project from Android Studio and add /toast-iap-android-sdk-studio to SDK package.</p>
<blockquote><p>[Reference]<br/>Set sdk.dir value in local.properties to Android SDK path set in local. If sample application is built in release build type, enter keystore information for APK signing. Flavor and buildType can be selected from Build Variants menu in Android Studio.</p>
</blockquote><p><br/></p>
<blockquote><p>[Reference]<br/>Workspace Encoding Type<br/>Check if the Workspace File Encoding of the imported project is set in UTF-8. If not, change to UTF-8 </p>
</blockquote><h4>Setting Market Information to AndroidManifest.xml</h4><p>Set appId / market using information registered to IAP Web Console</p>
<blockquote><p>[Reference]<br/>Set appId / Store<br/>Refer to AndroidManifest.xml of each market’s Flavor section of sample application for detailed setting.</p>
</blockquote><h2>Using in Eclipse</h2><p>IAP Android SDK is distributed in Android Library Project format.</p>
<table>
  <thead>
    <tr>
      <th>Directory Name </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>/docs </td>
      <td>API reference </td>
    </tr>
    <tr>
      <td>/toast-iap-android-sdk-eclipse/iap </td>
      <td>IAP Android library project </td>
    </tr>
    <tr>
      <td>/toast-iap-android-sdk-eclipse/iap-sample </td>
      <td>Sample application </td>
    </tr>
  </tbody>
</table><p>[Table.1 Android SDK Directory Information]</p><h3>How To Import</h3>
<pre><code>[Eclipse] &gt; [File] &gt; [Import] select.  
[Android] - [Existing Android Code into Workspace] select.  
&lt;Import Projects&gt; 창 &gt; [Browse] butoon &gt; [IAP SDK] folder select.  
Once IAP SDK &amp; sample application project are displayed in Import list, select [Finish] while all projects are selected.
</code></pre>
<blockquote><p>[Reference]<br/>If error occurs in Project after importing, follow below instructions<br/>- [project] &gt; [clean] select.<br/>- [IAP] right click &gt; [Properties] &gt; [Resource] &gt; [Text File Encoding] set to UTF-8.</p>
</blockquote><h3>Add IAP Android SDK</h3>
<pre><code>Right Click of [project] &gt; [Properties] &gt; [Android] &gt; [Add] &gt; Add IAP
</code></pre><p><img src="http://static.toastoven.net/prod_iap/iap_5.jpg" alt="[Figure.1 IAP SDK]" /><br/><center>[Figure 1 IAP SDK]</center></p><h2>Setting Android Project</h2><h3>AndroidManifest.xml Modification</h3><p>This is for Google Play development.</p>
<pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;
&lt;!-- google iab permission --&gt;
&lt;uses-permission android:name=&quot;com.android.vending.BILLING&quot; /&gt;

&lt;application&gt;
...
        &lt;activity android:name=&quot;com.nhnent.mobill.api.core.IAPActivity&quot;
	        android:configChanges=&quot;keyboardHidden|orientation|screenSize|locale|layoutDirection&quot;
	        android:theme=&quot;@android:style/Theme.Translucent.NoTitleBar&quot;
	        android:windowSoftInputMode=&quot;adjustResize|stateHidden&quot; /&gt;
        &lt;meta-data android:name=&quot;com.toast.iap.config.appId&quot; android:value=&quot;1000000&quot; /&gt;
        &lt;meta-data android:name=&quot;com.toast.iap.config.market&quot; android:value=&quot;GG&quot; /&gt;
&lt;/application&gt;
</code></pre><p>Setting information for AndroidManifest.xml is as follows.</p>
<table>
  <thead>
    <tr>
      <th>Property Name </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>android.permission </td>
      <td>Common Android authority for IAP use <br/> * Duplicate permission can be omitted. </td>
    </tr>
    <tr>
      <td>com.android.vending.BILLING </td>
      <td>Authority for Google Play. <br/> * Names and/or contents may differ depending on store. </td>
    </tr>
    <tr>
      <td>activity </td>
      <td>Register activity offered by IAP </td>
    </tr>
    <tr>
      <td>com.toast.iap.config.appId </td>
      <td>App identifier issued by IAP web console </td>
    </tr>
    <tr>
      <td>com.toast.iap.config.market </td>
      <td>Store <br/>GG : Google Play <br/> AS : Apple App Store<br/> TS : One Store <br/>TEST : Test </td>
    </tr>
  </tbody>
</table><p>[Table.2 AndroidManifest.xml Information]</p>
<blockquote><p>[Reference]<br/>When market information is set in TEST, IAP’s API can be tested easily without entering market sync information.<br/>Please refer to Sample Application for more details. </p>
</blockquote><h2>IAP Payment Flow Diagram</h2><p>In-app purchase is proceeded in two stages: payment request and payment consume.<br/>If payment consume is complete, issue item in user’s application.</p>
<blockquote><p>[Reference]  
[IAP Payment Flow](/Common/IAP/en/Overview/#iap)</p>
</blockquote><h3>Registering User Identifier</h3><p>Register authorized user ID.<br/>This is user identifier defined by developer, which qualifies for item issuance.</p><p>[Request Example]</p>
<pre><code class="java">InAppPurchases.InAppPurchase.registerUserId(userId); // userId : String value
</code></pre><h3>Inquiry All Purchasable Items</h3><p>Inquire All Purchasable Items</p><p>[Request Example]</p>
<pre><code class="java">InAppPurchases.InAppPurchase.queryItems(activity, new InAppPurchase.ItemListCallback() {
    @Override
    public void onCallback(JSONArray result, InAppPurchaseException exception) {
        if (exception != null) {
            // An error occurred, we need to handle the error
            return;
        }
        // Success! Include your code to handle the results here
    }
});
</code></pre><p>[Method]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Syntax </td>
      <td>public void queryItems(Activity activity, ItemListCallback callback) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>activity [in] of current application. </td>
    </tr>
    <tr>
      <td>Parameter </td>
      <td>callback [in] which returns response of API.</td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p>[Response Example]<br/><code>json
[
    {
        &quot;itemSeq&quot; : 1000208,
        &quot;itemName&quot; : &quot;Test item 01&quot;,
        &quot;marketItemId&quot;: &quot;item01&quot;,
        &quot;price&quot;: 1000,
        &quot;currency&quot;: &quot;KRW&quot;
    },
    {
        &quot;itemSeq&quot; : 1000209,
        &quot;itemName&quot; : &quot;Test item 02&quot;,
        &quot;marketItemId&quot;: &quot;item02&quot;,
        &quot;price&quot;: 7.99,
        &quot;currency&quot;: &quot;USD&quot;
}]
</code></p><h3>Request Payment</h3><p>Request item purchase from client. Response for payment request will be received via PurchaseCallback. Once payment is successfully done, send result to server to consume payment details.</p><p>[Request Example]</p>
<pre><code class="java">InAppPurchases.InAppPurchase.requestPurchase(this, 1000001, new PurchaseCallback() {

    @Override
    public void onCallback(JSONObject result, InAppPurchaseException exception) {
           if (!result.isSuccess()) {
              // An error occurred, we need to handle the error
              return;
           }
           // Success! Include your code to handle the results here
       }
});
</code></pre><p>[Method]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Syntax </td>
      <td colspan="2">public void requestPurchase(Activity activity, long itemId, String currency, float price, PurchaseCallback callback) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>activity [in] of current application. </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>itemId [in] generated in Web Console [Item] </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>callback [in] which returns response of API. </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p>[Response Example]</p>
<pre><code class="json">{
    &quot;paymentSeq&quot;: &quot;2014082210002092&quot;,
    &quot;purchaseToken&quot;: &quot;5PYSHgisiCU8BditHnDbPhmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000001,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot;: 1000.0
}
</code></pre>
<blockquote><p>[Reference]<br/>IAP Android SDK payment confirmation pop-up<br/>There will be no payment confirmation pop-up appearing from toast-iap-android-sdk-1.2.3; it will be directly processed to market purchase.</p>
</blockquote><p><img src="http://static.toastoven.net/prod_iap/iap_40.jpg" alt="[Figure 2 Payment confirmation pop-up supported in old version]" /><br/><center>[Figure 2 Payment confirmation pop-up supported in old version]</center></p><h3>Payment Consume</h3><p>User application server should notify IAP server for payment consume before issuing item. Use Payment Purchase Token to check validity of the payment between user server and IAP server.</p>
<blockquote><p>[Reference]  
[Server Payment Consume API](/Common/IAP/en/Server%20Developer%60s%20Guide/#payment-consume-api) </p>
</blockquote><p>[HTTP Request Example]</p>
<pre><code class="http">POST
https://api-iap.cloud.toast.com/inapp/v3/consume/{paymentSeq}/items/{itemSeq}

RequestBody
{
 &quot;purchaseToken&quot;:string
}
</code></pre><p>[Response Example]</p>
<pre><code class="json">{
    &quot;header&quot;: {
        &quot;resultCode&quot;: 0,
        &quot;resultMessage&quot;: &quot;request is successful&quot;,
        &quot;isSuccessful&quot;: true
    },
    &quot;result&quot;: {
        &quot;price&quot;:1000.0,
        &quot;currency&quot;:&quot;KRW&quot;
    }
}
</code></pre><h3>Inquiry unconsumed user payment history.</h3><p>Inquire unconsumed user payment history.</p><p>[Request Example]</p>
<pre><code class="java">InAppPurchases.InAppPurchase.queryPurchases(this, new PurchaseListCallback() {

    @Override
    public void onCallback(JSONArray result, InAppPurchaseException exception) {
           if (!result.isSuccess()) {
              // An error occurred, we need to handle the error
              return;
           }
           // Success! Include your code to handle the results here }
});
</code></pre><p>[Method]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Syntax </td>
      <td>public void queryPurchases(Activity activity, PurchaseListCallback callback)</td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>activity [in] of current application. </td>
    </tr>
    <tr>
      <td>Parameter </td>
      <td>callback [in] which returns response of API.</td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p>[Response Example]</p>
<pre><code class="json">[{
    &quot;paymentSeq&quot;: &quot;2014082210002092&quot;,
    &quot;purchaseToken&quot;: &quot;5PYSHgisiCU8BditHnDbPhmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000208,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot;: 1000.0
}, {
    &quot;paymentSeq&quot;: &quot;2014082210002093&quot;,
    &quot;purchaseToken&quot;: &quot;Q+os4dDsYaGiEEqkLeXQfhmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000208,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot;: 1000.0
}, {
    &quot;paymentSeq&quot;: &quot;2014082210002094&quot;,
    &quot;purchaseToken&quot;: &quot;GMBcODtMnX306wVlFGIcDRmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000208,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot;: 1000.0
}]
</code></pre><h3>Batch process of unconsumed payment</h3><p>processes whole of unconsumed(cause of verification failure or network loss) payments. </p><p>[Request Example]</p>
<pre><code class="java">InAppPurchases.InAppPurchase.processesIncompletePurchases(activity, new InAppPurchase.IncompletePurchasesCallback() {

    @Override
    public void onCallback(JSONObject result, InAppPurchaseException exception) {
           if (exception != null) {
              // An error occurred, we need to handle the error
              return;
           }
           // Success! Include your code to handle the results here }
});
</code></pre><p>[Method]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Syntax </td>
      <td>public void processesIncompletePurchases(Activity activity, IncompletePurchasesCallback callback)</td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>activity [in] of current application. </td>
    </tr>
    <tr>
      <td>Parameter </td>
      <td>callback [in] which returns response of API.</td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p>[Response Example]</p>
<pre><code class="json">{
    &quot;successList&quot;: [
    	{
    		&quot;paymentSeq&quot; : &quot;2014082510002163&quot;,
    		&quot;purchaseToken&quot; : &quot;8nkx3SzHKlI74vmgQLzHExmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoB-AB&quot;,
    		&quot;itemSeq&quot; : 1000208,
    		&quot;marketItemId&quot;	: &quot;item01&quot;,
    		&quot;currency&quot; : &quot;KRW&quot;,
    		&quot;price&quot; : 1000.0
    	},
    	{
    		&quot;paymentSeq&quot; : &quot;2014082510002164&quot;,
    		&quot;purchaseToken&quot; : &quot;8nkx3SzATKlI74vmgQLzHExmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBaAC&quot;,
    		&quot;itemSeq&quot; : 1000209,
    	    &quot;marketItemId&quot;	: &quot;item02&quot;,
    		&quot;currency&quot; : &quot;KRW&quot;,
    		&quot;price&quot; : 1000.0
    	}
    ],
    &quot;failList&quot;: [
    	{
    		&quot;paymentSeq&quot; : &quot;2014082510002165&quot;,
    		&quot;purchaseToken&quot; : null,
    		&quot;itemSeq&quot; : 1000210,
    		&quot;marketItemId&quot;	: &quot;item03&quot;,
    		&quot;currency&quot; : &quot;KRW&quot;,
    		&quot;price&quot; : 1000.0
    	}
    ]
}
</code></pre><h3>Processing Error after Calling API</h3><p>InAppPurchaseException class delivers error information of API call.</p>
<pre><code class="java">InAppPurchases.InAppPurchase.queryPurchases(activity, new PurchaseListCallback() {

    @Override
    public void onCallback(JSONArray result, InAppPurchaseException exception) {
           if (exception != null) {
              int errorCode = exception.getErrorCode();
              String errorMessage = exception.getMessage();
              // TODO : do something when error occurs.
              ....
              return;
           }
     }
});
</code></pre>
<ul>
  <li>errorCode - error code</li>
  <li>errorMessage - error detail message</li>
</ul>
<blockquote><p>[Reference]  
[Error Code Guide](/Common/IAP/en/Error%20Code/) </p>
</blockquote><h2>Android Sample Application</h2><p>Sample application can be imported in Eclipse + ADT development environment.</p>
<pre><code>[Eclipse] &gt; [File] &gt; select [Import]  
[Android - Existing Android Code into Workspace] select &gt; select [Next]  
&lt;Import Projects&gt; window &gt; click [Browse] button &gt; select [IAP Android SDK] folder 
you can see [IAP Android SDK] and sample application project in [Import] list. 
check projects to be imported  
check [Copy Project into Workspace]  
click [Finish] button and Import completed
</code></pre><p><img src="http://static.toastoven.net/prod_iap/iap_7.jpg" alt="[Figure 3 Add sample application]" /><br/><center>[Figure 3 Add sample application]</center></p><h3>Using Test Store</h3><p>Set market code to TEST to test API provided by IAP Android SDK without actual market sync information.</p>
<pre><code class="xml">&lt;meta-data android:name=&quot;com.toast.iap.config.market&quot; android:value=&quot;TEST&quot; /&gt;
</code></pre><h3>Sample Code</h3><p>Refer to IAPServiceProvider class of com.nhnent.iap.sample package.</p><h2>Android Reference</h2><h1>Package: com.toast.android.iap</h1><h3>public interface InAppPurchase</h3><p>Interface for In app purchase payment.</p><p>[Method Summary]</p>
<table>
  <thead>
    <tr>
      <th>name </th>
      <th>Return Value </th>
      <th>Parameter </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>setDebugMode </td>
      <td>void </td>
      <td>boolean isDebuggable </td>
    </tr>
    <tr>
      <td>registerUserId </td>
      <td>void </td>
      <td>String userId </td>
    </tr>
    <tr>
      <td>requestPuchase </td>
      <td>void </td>
      <td>Activity activity, long itemId, PurchaseCallback callback </td>
    </tr>
    <tr>
      <td>queryPurchases </td>
      <td>void </td>
      <td>Activity activity, PurchaseListCallback callback </td>
    </tr>
  </tbody>
</table><p>[setDebugMode]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>Set IAP SDK log information activation. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public void setDebugMode(boolean isDebuggable) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>isDebuggable [in] Expose log information when true.</td>
    </tr>
  </tbody>
</table><p>[Example Code]</p>
<pre><code class="java">InAppPurchases.InAppPurchase.setDebugMode(true);
</code></pre><p>[registerUserId]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>Register user identifier after user verification in application. It is not store account. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public void registerUserId(String userId) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>userId [in] userId shall be unchanging unique value as user identifier. </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p>[Example Code]</p>
<pre><code class="java">InAppPurchases.InAppPurchase.registerUserId(&quot;guest0001&quot;);
</code></pre><p>[requestPurchase]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>Request in-app purchase. Response for payment request is delivered via PurchaseCallback interface. Register item information via Web Console. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public void requestPurchase(Activity activity, long itemId, PurchaseCallback callback) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>activity [in] of current application. </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>itemId [in] generated in Web Console </td>
    </tr>
    <tr>
      <td>Parameter </td>
      <td>callback [in] which returns response of API.</td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p>[Response (JSON)]</p>
<table>
  <thead>
    <tr>
      <th>Attribute </th>
      <th>Value </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>paymentSeq </td>
      <td>String </td>
      <td>unique payment identifier for completed payment. </td>
    </tr>
    <tr>
      <td>itemSeq </td>
      <td>Long </td>
      <td>item identifier </td>
    </tr>
    <tr>
      <td>purchaseToken </td>
      <td>String </td>
      <td>Token information required for requesting payment consume in IAP server from application server.</td>
    </tr>
    <tr>
      <td>currency </td>
      <td>String </td>
      <td>currency </td>
    </tr>
    <tr>
      <td>price </td>
      <td>Float </td>
      <td>price </td>
    </tr>
  </tbody>
</table><p>[Response Example]</p>
<pre><code class="json">{
    &quot;paymentSeq&quot;: &quot;2014082210002092&quot;,
    &quot;purchaseToken&quot;: &quot;5PYSHgisiCU8BditHnDbPhmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000001,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot; : 1000.0
}
</code></pre><p>[queryPurchases]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>Inquire unconsumed payment history. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public void queryPurchases(Activity activity, PurchaseListCallback callback) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>activity [in] of current application. </td>
    </tr>
    <tr>
      <td>Parameter </td>
      <td>callback [in] which returns response of API.</td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p><strong>[Response (JSON)]</strong></p>
<table>
  <thead>
    <tr>
      <th>Attribute </th>
      <th>Value </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>paymentSeq </td>
      <td>String </td>
      <td>unique payment identifier for completed payment. </td>
    </tr>
    <tr>
      <td>purchaseToken </td>
      <td>String </td>
      <td>Token information required for requesting payment consume in IAP server from application server. </td>
    </tr>
    <tr>
      <td>itemSeq </td>
      <td>Long </td>
      <td>item identifier </td>
    </tr>
    <tr>
      <td>currency </td>
      <td>String </td>
      <td>currency </td>
    </tr>
    <tr>
      <td>price </td>
      <td>Float </td>
      <td>price </td>
    </tr>
  </tbody>
</table><p>[Response Example]</p>
<pre><code class="json">[{
    &quot;paymentSeq&quot;: &quot;2014082210002092&quot;,
    &quot;purchaseToken&quot;: &quot;5PYSHgisiCU8BditHnDbPhmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000208,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot; : 1000.0

}, {
    &quot;paymentSeq&quot;: &quot;2014082210002093&quot;,
    &quot;purchaseToken&quot;: &quot;Q+os4dDsYaGiEEqkLeXQfhmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000208,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot; : 1000.0

}, {
    &quot;paymentSeq&quot;: &quot;2014082210002094&quot;,
    &quot;purchaseToken&quot;: &quot;GMBcODtMnX306wVlFGIcDRmlS/0DSt4JDs2UMyg1/EY8oC6Q8qkuw5VBo7GNrBYLNUy656GCAh7h9e1BtXeoBA==&quot;,
    &quot;itemSeq&quot;: 1000208,
    &quot;currency&quot;: &quot;KRW&quot;,
    &quot;price&quot; : 1000.0

}]
</code></pre><p>[queryItems]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>Inquire all purchasable items. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public void queryItems(Activity activity, ItemListCallback callback) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>activity [in] of current application. </td>
    </tr>
    <tr>
      <td>Parameter </td>
      <td>callback [in] which returns response of API.</td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><p><strong>[Response (JSON)]</strong></p>
<table>
  <thead>
    <tr>
      <th>Attribute </th>
      <th>Value </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>itemSeq </td>
      <td>Long </td>
      <td>item identifier </td>
    </tr>
    <tr>
      <td>itemName </td>
      <td>String </td>
      <td>item name </td>
    </tr>
    <tr>
      <td>marketItemId </td>
      <td>String </td>
      <td>item ID shown in store console. </td>
    </tr>
    <tr>
      <td>currency </td>
      <td>String </td>
      <td>currency </td>
    </tr>
    <tr>
      <td>price </td>
      <td>Float </td>
      <td>price </td>
    </tr>
  </tbody>
</table><p>[Response Example]</p>
<pre><code class="json">[{
    &quot;itemSeq&quot; : 1000208,
    &quot;itemName&quot; : &quot;Test item 01&quot;,
    &quot;marketItemId&quot;: &quot;item01&quot;,
    &quot;price&quot;: 1000,
    &quot;currency&quot;: &quot;KRW&quot;
}, {
    &quot;itemSeq&quot; : 1000209,
    &quot;itemName&quot; : &quot;Test item 02&quot;,
    &quot;marketItemId&quot;: &quot;item02&quot;,
    &quot;price&quot;: 7.99,
    &quot;currency&quot;: &quot;USD&quot;
}]
</code></pre><h3>public interface InAppPurchase.PurchaseCallback</h3><p>callback interface for receiving response after payment request</p><p>[Method Summary]</p>
<table>
  <thead>
    <tr>
      <th>Name </th>
      <th>Return Value </th>
      <th>Parameter </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>onCallback </td>
      <td>void </td>
      <td>JSONObject result, InAppPurchaseException exception </td>
    </tr>
  </tbody>
</table><p>[onCallback]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>Send API request result. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public abstract void onCallback(JSONObject result, InAppPurchaseException exception) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>result [in] return result code and message. </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>exception [in] return detail error. if null, request is successful. </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table><h3>public interface InAppPurchase.PurchaseListCallback</h3><p>callback interface for receiving response after payment request</p><p>[Method Summary]</p>
<table>
  <thead>
    <tr>
      <th>Name </th>
      <th>Return Value </th>
      <th>Parameter </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>onCallback </td>
      <td>void </td>
      <td>JSONArray result, InAppPurchaseException exception </td>
    </tr>
  </tbody>
</table><p>[onCallback]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>Send API request result. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public abstract void onCallback(JSONArray result, InAppPurchaseException exception) </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>result [in] return result code and message. </td>
    </tr>
    <tr>
      <td>Parameters </td>
      <td>exception [in] return detail error. if null, request is successful. </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>void </td>
    </tr>
  </tbody>
</table>
<blockquote><p>[Reference]<br/>1. Call unsynchronized API from UI Thread (main Thread)<br/>2. When calling unsynchronized API, send response result via parameter Callback interface.</p>
</blockquote><h3>public final class InAppPurchases</h3><p>Entry Point for IAP payment interface</p><p>[Field]</p>
<table>
  <thead>
    <tr>
      <th>Type </th>
      <th>Variable </th>
      <th>Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>public static final InAppPurchase </td>
      <td>InAppPurchases </td>
      <td>interface for iap payment </td>
    </tr>
  </tbody>
</table><p>[getSdkVersion]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>returns SDK version.</td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public static String getSdkVersion() </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>String SDK의 Version </td>
    </tr>
  </tbody>
</table><p>[getAppId]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>returns App ID. </td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public static long getAppId() </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>String App ID registered in SDK</td>
    </tr>
  </tbody>
</table><h1>Package: com.toast.android.iap.exception</h1><h3>public class InAppPurchaseException extends Exception</h3><p>Returns error of api request.</p><p>[getErrorCode]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>returns error code.</td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public int getErrorCode() </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>int error code </td>
    </tr>
  </tbody>
</table><p>[getMessage]</p>
<table>
  <thead>
    <tr>
      <th>Word</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Description </td>
      <td>returns detail error message.</td>
    </tr>
    <tr>
      <td>Syntax </td>
      <td>public String getMessage() </td>
    </tr>
    <tr>
      <td>Return Value </td>
      <td>String detail error message</td>
    </tr>
  </tbody>
</table>
   	</div>

 	
	
	<div class="col-md-2">
		<div id="side_nav_right" class="side-nav">
			<div id="sub-link-nav" role="complementary">
    				<b id="sub-link-category-name" class="main"></b>
    				<ul class="nav">

    				</ul>
			</div>
		</div>
	</div>       
        
</div>

<footer id="footer" class="col-md-12">
</footer>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../../../js/readthedocs-data.js"></script>
    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/modernizr-custom.js"></script>
    <script type='text/javascript'>
         if (!Modernizr.matchmedia){
             $.getScript("js/media.match.min.js");
         }
    </script>
    <script src="../../../js/highlight.pack.js"></script>
    <script src="../../../js/enquire.min.js"></script>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/base.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/common-1.0.min.js"></script>
    <script src="../../../js/custom.js"></script>
    
	<script src="../../../js/js.cookie.js"></script>
	
	<script language='javascript'>
	if ( document.cookie == "" ){
	console.log("change");
	Cookies.set('ACEFCID', 'UID-59E5799FBC4FC8C9A29963B3',{path: ''});
	Cookies.set('AECUCI', '1',{path: ''});
	Cookies.set('BID', '5L76UVQPYSDFK836992CCGYLA',{path: ''});
	Cookies.set('NNB', '55YK4WMTKOXFS',{path: ''});
	Cookies.set('ttx_did', 'e93d733a-c43b-452c-b3ea-57c49bc5e9f8',{path: ''});
	Cookies.set('userLocale', 'ko_KR',{path: ''});
	}
	</script>
	
    <!-- <script src="../../../js/prettify.js"></script>  -->

        <script language='javascript'>
        var _ag   = 0 ;         // 로그인사용자 나이
        var _id   = '';    		// 로그인사용자 아이디
        var _mr   = '';        	// 로그인사용자 결혼여부 ('single' , 'married' )
        var _gd   = '';         // 로그인사용자 성별 ('man' , 'woman')
        var _skey = '' ;        // 내부검색어

        var _jn = '' ;          //  가입탈퇴 ( 'join','withdraw' ) 
        var _jid = '' ;			// 가입시입력한 ID

        var _ud1 = '' ;			// 사용자 정의변수 1 ( 1 ~ 10 정수값)
        var _ud2 = '' ;			// 사용자 정의변수 2 ( 1 ~ 10 정수값)
        var _ud3 = '' ;			// 사용자 정의변수 3 ( 1 ~ 10 정수값)
        </script>
		
		<script language='javascript'>
		$("h2,h3").attr("id", function (arr) {
			return arr;
		});
		</script>
	
	 <script language='javascript'>
		function appendListToSubLinkNav() {

        var $parent_menu = $('ul.dropdown-menu > li.active').parent().parent();
		
        if(!$parent_menu.length) {
            $('#side_nav_right').remove();
        }
        else {
            var depth_stack = [];
            while($parent_menu.is('li')) {
                var temp = $parent_menu;
                depth_stack.push(temp);
                $parent_menu = $parent_menu.parent().parent();
            }
            var title_menu = (depth_stack.length > 1)? depth_stack[depth_stack.length-2] : depth_stack[0];
		    $('#sub-link-category-name').text(title_menu.children("a")[0].innerText);
			var subMenuList = $('li .active').parent().get(0).childNodes;
			for (var i = 0; i < subMenuList.length; i++) {
				$("#sub-link-list").append(subMenuList[i].cloneNode(true));
				$("#sub-link-nav > ul").append(subMenuList[i].cloneNode(true));
			}
		}
	}
	</script>

	
     <!-- <script language='javascript'>
            var _AceGID=(function(){var Inf=['gtp18.acecounter.com','8080','AH2A40934468137','AW','0','NaPm,Ncisy','ALL','0']; var _CI=(!_AceGID)?[]:_AceGID.val;var _N=0;var _T=new Image(0,0);if(_CI.join('.').indexOf(Inf[3])<0){ _T.src =( location.protocol=="https:"?"https://"+Inf[0]:"http://"+Inf[0]+":"+Inf[1]) +'/?cookie'; _CI.push(Inf);  _N=_CI.length; } return {o: _N,val:_CI}; })();
            var _AceCounter=(function(){var G=_AceGID;if(G.o!=0){var _A=G.val[G.o-1];var _G=( _A[0]).substr(0,_A[0].indexOf('.'));var _C=(_A[7]!='0')?(_A[2]):_A[3];	var _U=( _A[5]).replace(/\,/g,'_');var _S=((['<scr','ipt','type="text/javascr','ipt"></scr','ipt>']).join('')).replace('tt','t src="'+location.protocol+ '//cr.acecounter.com/Web/AceCounter_'+_C+'.js?gc='+_A[2]+'&py='+_A[4]+'&gd='+_G+'&gp='+_A[1]+'&up='+_U+'&rd='+(new Date().getTime())+'" t');document.writeln(_S); return _S;} })();
        </script>
	<noscript><img src='http://gtp18.acecounter.com:8080/?uid=AH2A40934468137&je=n&' border='0' width='0' alt=''></noscript> -->

  </body>
</html>
