<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../nhnfavicon.ico">

	      <title>Toast Cloud Document</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
		    <!-- <link href="http://alpha-www.toast.com/share/common/css/common-1.0.min.css" rel="stylesheet"> -->
        <link href="../../../css/common-1.0.min.css" rel="stylesheet">
        <link href="../../../css/custom_tc_theme.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>
	<body>
	<header id="header">
        </header>
        <div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div>
        <div class="navbar-header" style="padding-top : 30px;">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
 
        </div>
        <div class="navbar-collapse collapse">
		
                    </ul>
                </li>

    	    </ul>
        </div>
    </div>
</div>        <div class="container" style="margin-top: 100px;">
            <div class="col-md-2">
            	<div class="side_nav_left_wrapper">
	           	<div id="side_nav_left" class="side-nav">
	            		<div id="remotenav" class="bs-sidebar hidden-print affix well toc-list" role="complementary"> 
					<ul class="nav bs-sidenav">
						
					</ul>
				</div>
			</div>
		</div>
    	</div>
		


	<div class="col-md-8 content-container" role="main"> 			
		<h2>Upcoming Products &gt; Deploy &gt; Getting Started</h2>
<blockquote><p>※ 본 문서는 alpha 개발 단계의 문서입니다.<br/>사용에 관심이 있으신 분은 **<a href="mailto:&#115;&#117;p&#x70;&#x6f;r&#x74;&#x40;&#99;&#108;&#111;&#117;&#100;&#46;&#x74;&#111;&#x61;&#x73;&#116;&#46;&#99;o&#x6d;&#x2a;&#42;&#51004;&#47196;">&#115;&#117;p&#x70;&#x6f;r&#x74;&#x40;&#99;&#108;&#111;&#117;&#100;&#46;&#x74;&#111;&#x61;&#x73;&#116;&#46;&#99;o&#x6d;&#x2a;&#42;&#51004;&#47196;</a> 문의해 주시기 바랍니다.</p>
</blockquote><p>Deploy 상품의 이용은 아래와 같은 과정을 거칩니다.<br/>아래 Client Application과 Server Application의 설정과정을 참고하여 배포를 진행할 수 있습니다.</p><h2>서비스 활성화</h2><p>Console에 [Upcoming Products] &gt; [Deploy]를 선택한 후 [상품이용]버튼을 클릭하여 서비스를 활성화합니다.</p><p><img src="http://images.toast.co.kr/toast/deploy/guide/01.png" alt="[그림 1] 서비스 활성화" /><br/><center>[그림 1] 서비스 활성화</center></p><h2>For Client Application</h2><p>클라이언트 어플리케이션을 위한 설정은 크게 Artifact 설정과 Binary Upload 단계를 거칩니다.</p><h3>Artifact 설정 Deploy &gt; Artifacts</h3><p>Artifact는 Deploy 상품에서 배포의 기본 단위입니다.</p>
<ul>
  <li>아래 [그림 2]과 같이 필수 입력 사항을 기입하고 Artifact를 생성합니다.</li>
</ul><p><img src="http://images.toast.co.kr/toast/deploy/guide/02.png" alt="[그림 2] Artifact - Client Application 생성" /><br/><center>[그림 2] Artifact - Client Application 생성</center></p>
<ol>
  <li>New 버튼 클릭</li>
  <li>Artifact Type을 &ldquo;<strong>Client Application</strong>&rdquo;으로 선택</li>
  <li>Name(required), Description(optional) 입력</li>
  <li>create 버튼 클릭</li>
</ol><h3>Binary UploadDeploy &gt; Artifacts</h3><p>Binary를 업로드합니다.</p>
<ul>
  <li>iOS의 경우는 ipa, plist 파일을 Android는 apk 파일을 각각 업로드합니다.</li>
  <li>etc의 경우는 windows 등의 기타 os의 설치 어플리케이션 용도로 사용합니다.</li>
</ul><p><img src="http://images.toast.co.kr/toast/deploy/guide/03.png" alt="[그림 3] iOS Application Upload" /><br/><center>[그림 3] iOS Application Upload</center></p>
<ol>
  <li>upload 버튼 클릭</li>
  <li>Binary(iOS의 경우 ipa 파일, required), plist(plist파일, required) 파일 선택</li>
  <li>Version(optional), Description(optional) 정보 입력</li>
  <li>upload 버튼 클릭</li>
</ol><h2>For Server Application</h2><p>서버 어플리케이션의 배포는 설정(Artifact, Server Group, Scenario), Binary Upload, Deploy의 단계를 거칩니다.</p><h3>설정</h3><p>서버 어플리케이션의 배포를 위해서는 Artifact, Server Group, Scenario 설정이 필요합니다.</p><h4>Artifact 설정Deploy &gt; Artifacts</h4><p>Artifact를 생성합니다.</p>
<ul>
  <li>Artifact는 Deploy 상품에서 배포의 기본 단위입니다.</li>
  <li>아래 [그림 4]과 같이 필수 입력사항을 기입하여 Artifact를 생성합니다.</li>
</ul><p><img src="http://images.toast.co.kr/toast/deploy/guide/04.png" alt="[그림 4] Artifact - Server Application 생성" /><br/><center>[그림 4] Artifact - Server Application 생성</center></p>
<ol>
  <li>New 버튼 클릭</li>
  <li>Artifact Type을 &ldquo;<strong>Server Application</strong>&rdquo;으로 변경</li>
  <li>Name(required), Description(optional) 입력</li>
  <li>Command Type 선택 (Salt Stack과 SSH 중 선택하실 수 있습니다.)
  <ul>
    <li><strong>Salt Stack</strong> : 대상 서버에 Salt Stack 연동을 위한 Minion이 설치되어 있어야 합니다.</li>
    <li><strong>SSH</strong> : 대상서버에 SSH를 사용 할 수 있어야 합니다.</li>
  </ul></li>
  <li>서버 접근 계정 입력 (대상서버로 Command를 실행하기 위한 Linux 계정)</li>
  <li>create 버튼 클릭</li>
</ol><h4>Server Group 설정Deploy &gt; Artifacts</h4><p>Server Group을 생성합니다.</p>
<ul>
  <li>시나리오가 수행되는 기본 단위입니다.</li>
  <li>dev, alpha, beta, release 등과 같이 서버의 Stage를 구분하는 용도로 사용할 수 있습니다.</li>
</ul><p><img src="http://images.toast.co.kr/toast/deploy/guide/05.png" alt="[그림 5] Server Group 설정" /><br/><center>[그림 5] Server Group 설정</center></p>
<ol>
  <li>
  <ul>
    <li>버튼 클릭</li>
  </ul></li>
  <li>Name(required), Description(optional) 입력</li>
  <li>host name(required), ip(required), os(optional) 정보 입력</li>
  <li>서버 추가 버튼 클릭</li>
  <li>create 버튼 클릭</li>
</ol><h4>Scenario 설정Deploy &gt; Deploy</h4><p>Scenario를 생성합니다.</p>
<ul>
  <li>배포를 진행하기 위한 command 설정과정입니다.</li>
  <li>Task를 추가하거나, Task를 삭제하고 각각의 Task 순서를 조정하여 배포 프로세스를 설정합니다.</li>
</ul><p><img src="http://images.toast.co.kr/toast/deploy/guide/06.png" alt="[그림 6] Scenario 생성" /><br/><center>[그림 6] Scenario 생성</center></p>
<ol>
  <li>New 버튼 클릭</li>
  <li>Name(required) 입력</li>
  <li>create 버튼 클릭</li>
</ol><p><img src="http://images.toast.co.kr/toast/deploy/guide/07.png" alt="[그림 7] Scenario의 Task 추가" /><br/><center>[그림 7] Scenario의 Task 추가</center></p>
<ol>
  <li>add task 버튼 클릭</li>
  <li>Task profile 선택
  <ul>
    <li><strong>Binary Deploy</strong> : 배포 할 바이너리 선택을 위한 Task</li>
    <li><strong>Log Monitoring</strong> : 로그 확인을 위한 Task (배포시 성공과 실패에 대한 판단용으로 활용)</li>
    <li><strong>User Command</strong> : 배포 과정에서 실행되어야 하는 커맨드를 위한 Task (서버 재시작, 압축해제, 기존소스 삭제 등에 활용)</li>
  </ul></li>
  <li>Task 작성 및 Task 실행 순서 설정</li>
  <li>save 버튼 클릭</li>
</ol><h3>Binary Upload</h3><p>대상 서버의 배포는 우선 바이너리 파일의 업로드 과정을 거쳐야 합니다.<br/>이후 Deploy 과정에서 업로드된 바이너리를 선택하여 진행하게 됩니다.<br/>바이너리 업로드의 편의를 위해서 아래과 같은 방법을 지원하고 있습니다. (각 Plugin들의 사용법은 Developer&rsquo;s Guide에서 확인 가능합니다.)</p>
<ul>
  <li>Web 업로드(Deploy 상품 웹페이지 직접 업로드)</li>
  <li>업로드 API URL</li>
  <li>Jenkins Plugin</li>
  <li>Ant Plugin</li>
  <li>Maven Plugin</li>
</ul><p><img src="http://images.toast.co.kr/toast/deploy/guide/08.png" alt="[그림 8] Binary Upload - Deploy 상품 웹페이지의 Artifacts 관리 페이지에서의 업로드 화면" /><br/><center>[그림 8] Binary Upload - Deploy 상품 웹페이지의 Artifacts 관리 페이지에서의 업로드 화면</center></p>
<ol>
  <li>upload 버튼 클릭</li>
  <li>Binary 파일 선택</li>
  <li>Version(optional), Description(optional) 정보 입력</li>
  <li>upload 버튼 클릭</li>
</ol><p>Deploy의 과정은 위 &ldquo;2.1 설정&rdquo; - &ldquo;Scenario 설정&rdquo;에서 진행했던 시나리오를 수행하는 과정입니다.<br/>사전에 설정한 시나리오 실행을 통해서 선택된 바이너리를 대상 서버에 배포 하게됩니다.<br/>시나리오 실행 방법은 Salt Stack(default)과 SSH를 사용하는 방법이 지원됩니다.<br/>각각 아래와 같은 제약이 존재합니다. </p>
<table>
  <thead>
    <tr>
      <th>시나리오</th>
      <th>제약</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Salt Stack</td>
      <td>- 대상서버에 권한 있는 사용자만 시나리오 실행이 가능합니다.<br/>- 대상서버에 Salt Stack Minion이 설치되어 Salt Stack Master와의 통신이 가능해야 합니다.<br/> minion 설치는 아래 &ldquo;Salt Stack Minion 설치 가이드&rdquo;를 참고해주세요.</td>
    </tr>
    <tr>
      <td>SSH</td>
      <td>- Deploy 상품에서 SSH를 사용할 수 있도록 대상 서버에 작업이 되어 있어야 합니다.</td>
    </tr>
  </tbody>
</table><p><img src="http://images.toast.co.kr/toast/deploy/guide/09.png" alt="[그림 9] Deploy - Salt Stack을 사용하여 시나리오를 실행하도록 설정된 Deploy화면" /><br/><center>[그림 9] Deploy - Salt Stack을 사용하여 시나리오를 실행하도록 설정된 Deploy화면</center></p>
<ol>
  <li>Artifact 선택</li>
  <li>Server Group 선택</li>
  <li>실행서버 선택 (default 서버그룹에 설정된 모든 서버)</li>
  <li>동시실행수 입력</li>
  <li>시나리오 선택</li>
  <li>deploy 버튼 클릭</li>
</ol><h4>[ 참고 ] Salt Stack Master 설치 가이드</h4><p>1.salt-master, salt-api 패키지 설치</p>
<pre><code>$&gt; yum install salt-master salt-api
</code></pre>
<ul>
  <li>Centos 4 버전에서는 python 2.6버전을 지원하지 않아 Salt Stack Master를 설치할 수 없습니다.</li>
  <li>salt-api는 Salt Stack Master에서 restful API를 지원하는 모듈입니다.</li>
</ul><p>2.master 설정파일(/etc/salt/master) 변경</p>
<pre><code># 인증가능한 linux User 추가
external_auth:
   pam: #pam인증 방식
      user_id: # linux user 아이디 추가
         - .*
#salt-api 설정 추가
rest_cherrypy:
   port: 80 # rest API를 사용할 포트 추가
   disable_ssl: True
#Example#
external_auth:
   pam:
      irteam : # irteam 계정으로 인증 합니다.
         - .*
rest_cherrypy:
   port: 8080 # 웹콘솔의 Master Port를 설정과 같은 8080으로 설정해야 합니다.
   disable_ssl: True # SSL을 사용하지 않습니다.
</code></pre>
<ul>
  <li>설정값 중 external_auth의 user_id는 linux 환경에서 사용되는 사용자 계정이어야 합니다.</li>
</ul><p>3.salt-master, salt-api 실행 (아래 각 command는 ROOT 권한으로 실행되어야 합니다.)</p>
<pre><code>$&gt; /etc/init.d/salt-master start
$&gt; /etc/init.d/salt-api start
</code></pre><p>4.연결된 minion 확인 (ROOT 권한 필요)</p>
<pre><code>$&gt; /usr/bin/salt-key
결과
Accepted Keys:
minion_id1
minion_id2
Denied Keys:
Unaccepted Keys:
Rejected Keys:
</code></pre>
<ul>
  <li>정상적으로 Master와 연결된 Minion의 ID가 Accepted Keys에 출력됩니다.</li>
  <li>master는 4505,4506포트를 통해 minion과 통신합니다. 해당 포트로 외부에서의 접근이 가능하도록 방화벽 설정을 변경해야 합니다.</li>
</ul><h4>[ 참고 ] Salt Stack Minion 설치 가이드</h4><p>1.salt-minion 패키지 설치</p>
<pre><code>$&gt; yum install salt-minion
</code></pre>
<ul>
  <li>Centos 4 버전에서는 python 버전 으로 인해 설치가 불가능 합니다.</li>
</ul><p>2.minion 설정파일(/etc/salt/minion) 변경</p>
<pre><code># Master 주소 설정 (Multi Master)
master:
	- master1.salt.toastoven.net
	- master2.salt.toastoven.net

# Minion ID 설정
id: Minion 서버의 Hostname
</code></pre><p>3.minion 실행 (ROOT 권한 필요)</p>
<pre><code>$&gt; /etc/init.d/salt-minion start
</code></pre>
<ul>
  <li>minion은 master의 4505, 4506포트로 접근가능해야 합니다.<br/> 불가능한 경우 네트워크 관리자에게 해당포트 ACL추가를 요청해야 합니다.</li>
</ul>
   	</div>

 	
	
	<div class="col-md-2">
		<div id="side_nav_right" class="side-nav">
			<div id="sub-link-nav" role="complementary">
    				<b id="sub-link-category-name" class="main"></b>
    				<ul class="nav">

    				</ul>
			</div>
		</div>
	</div>       
        
</div>

<footer id="footer" class="col-md-12">
</footer>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../../../js/readthedocs-data.js"></script>
    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/modernizr-custom.js"></script>
    <script type='text/javascript'>
         if (!Modernizr.matchmedia){
             $.getScript("js/media.match.min.js");
         }
    </script>
    <script src="../../../js/highlight.pack.js"></script>
    <script src="../../../js/enquire.min.js"></script>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/base.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/common-1.0.min.js"></script>
    <script src="../../../js/custom.js"></script>
    
	<script src="../../../js/js.cookie.js"></script>
	
	<script language='javascript'>
	if ( document.cookie == "" ){
	console.log("change");
	Cookies.set('ACEFCID', 'UID-59E5799FBC4FC8C9A29963B3',{path: ''});
	Cookies.set('AECUCI', '1',{path: ''});
	Cookies.set('BID', '5L76UVQPYSDFK836992CCGYLA',{path: ''});
	Cookies.set('NNB', '55YK4WMTKOXFS',{path: ''});
	Cookies.set('ttx_did', 'e93d733a-c43b-452c-b3ea-57c49bc5e9f8',{path: ''});
	Cookies.set('userLocale', 'ko_KR',{path: ''});
	}
	</script>
	
    <!-- <script src="../../../js/prettify.js"></script>  -->

        <script language='javascript'>
        var _ag   = 0 ;         // 로그인사용자 나이
        var _id   = '';    		// 로그인사용자 아이디
        var _mr   = '';        	// 로그인사용자 결혼여부 ('single' , 'married' )
        var _gd   = '';         // 로그인사용자 성별 ('man' , 'woman')
        var _skey = '' ;        // 내부검색어

        var _jn = '' ;          //  가입탈퇴 ( 'join','withdraw' ) 
        var _jid = '' ;			// 가입시입력한 ID

        var _ud1 = '' ;			// 사용자 정의변수 1 ( 1 ~ 10 정수값)
        var _ud2 = '' ;			// 사용자 정의변수 2 ( 1 ~ 10 정수값)
        var _ud3 = '' ;			// 사용자 정의변수 3 ( 1 ~ 10 정수값)
        </script>
		
		<script language='javascript'>
		$("h2,h3").attr("id", function (arr) {
			return arr;
		});
		</script>
	
	 <script language='javascript'>
		function appendListToSubLinkNav() {

        var $parent_menu = $('ul.dropdown-menu > li.active').parent().parent();
		
        if(!$parent_menu.length) {
            $('#side_nav_right').remove();
        }
        else {
            var depth_stack = [];
            while($parent_menu.is('li')) {
                var temp = $parent_menu;
                depth_stack.push(temp);
                $parent_menu = $parent_menu.parent().parent();
            }
            var title_menu = (depth_stack.length > 1)? depth_stack[depth_stack.length-2] : depth_stack[0];
		    $('#sub-link-category-name').text(title_menu.children("a")[0].innerText);
			var subMenuList = $('li .active').parent().get(0).childNodes;
			for (var i = 0; i < subMenuList.length; i++) {
				$("#sub-link-list").append(subMenuList[i].cloneNode(true));
				$("#sub-link-nav > ul").append(subMenuList[i].cloneNode(true));
			}
		}
	}
	</script>

	
     <!-- <script language='javascript'>
            var _AceGID=(function(){var Inf=['gtp18.acecounter.com','8080','AH2A40934468137','AW','0','NaPm,Ncisy','ALL','0']; var _CI=(!_AceGID)?[]:_AceGID.val;var _N=0;var _T=new Image(0,0);if(_CI.join('.').indexOf(Inf[3])<0){ _T.src =( location.protocol=="https:"?"https://"+Inf[0]:"http://"+Inf[0]+":"+Inf[1]) +'/?cookie'; _CI.push(Inf);  _N=_CI.length; } return {o: _N,val:_CI}; })();
            var _AceCounter=(function(){var G=_AceGID;if(G.o!=0){var _A=G.val[G.o-1];var _G=( _A[0]).substr(0,_A[0].indexOf('.'));var _C=(_A[7]!='0')?(_A[2]):_A[3];	var _U=( _A[5]).replace(/\,/g,'_');var _S=((['<scr','ipt','type="text/javascr','ipt"></scr','ipt>']).join('')).replace('tt','t src="'+location.protocol+ '//cr.acecounter.com/Web/AceCounter_'+_C+'.js?gc='+_A[2]+'&py='+_A[4]+'&gd='+_G+'&gp='+_A[1]+'&up='+_U+'&rd='+(new Date().getTime())+'" t');document.writeln(_S); return _S;} })();
        </script>
	<noscript><img src='http://gtp18.acecounter.com:8080/?uid=AH2A40934468137&je=n&' border='0' width='0' alt=''></noscript> -->

  </body>
</html>
